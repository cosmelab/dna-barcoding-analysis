tasks:
- id: review-rnaseq-container
  phase: initial_setup
  status: done
  summary: Review RNA-seq container Dockerfile and terminal setup
  agent_allowed: true
  depends_on: []
  completed: '2025-11-18T12:40:00'
  notes: 'Reviewed albopictus-diapause-rnaseq container. Excellent minimal design with
    zsh, oh-my-zsh, Dracula theme, colorls, lsd, starship. Will use as template. See D006.'
- id: review-hoque-paper
  phase: initial_setup
  status: done
  summary: Extract reference data from Hoque et al 2022 mosquito COI paper
  agent_allowed: true
  depends_on: []
  completed: '2025-11-18T12:40:00'
  notes: 'Paper contains 85 sequences from 19 species, 6 genera. AUCOS primers better
    than Folmer. GenBank accessions in Tables 2-3. See D007.'
- id: create-minimal-dockerfile
  phase: container_setup
  status: done
  summary: Create minimal Dockerfile based on RNA-seq template (target <800MB)
  agent_allowed: true
  depends_on:
  - review-rnaseq-container
  completed: '2025-11-18T14:00:00'
  notes: 'Base: mambaorg/micromamba. Tools: BioPython, MAFFT, IQTree2, BLAST, R (ape/ggtree).
    Terminal: zsh + oh-my-zsh + Dracula + colorls. 168 lines, 50% reduction. See D006, D008.'
- id: extract-reference-sequences
  phase: data_preparation
  status: done
  summary: Extract COI sequences from Hoque et al 2022 (85 sequences from GenBank)
  agent_allowed: true
  depends_on:
  - review-hoque-paper
  completed: '2025-11-18T13:30:00'
  notes: 'Created fetch_reference_sequences.py. Retrieved 52/53 sequences (98.1% success).
    Saved to data/reference/socal_mosquitoes.fasta. See D007.'
- id: create-qc-script
  phase: automation_scripts
  status: done
  summary: Create automated chromatogram QC script with visualization
  agent_allowed: true
  depends_on: []
  completed: '2025-11-18T18:00:00'
  notes: 'Created modules/01_quality_control/qc_chromatograms.py. Parses .ab1 with BioPython,
    embeds chromatogram plots with sequence overlay, collapsible HTML report. Shows bases 50-200
    (middle region) to avoid poor quality ends. Quality-colored bases (green/orange/red).'
- id: create-assembly-script
  phase: automation_scripts
  status: done
  summary: Create F/R sequence assembly script (merge-forward-reverse)
  agent_allowed: true
  depends_on:
  - create-qc-script
  completed: '2025-11-18T17:30:00'
  notes: 'Created modules/00_assembly/merge_forward_reverse.py. Pairs F/R sequences by sample
    name, generates consensus via reverse-complement merging. Tested with AT_ROCK samples.'
- id: create-alignment-script
  phase: automation_scripts
  status: done
  summary: Create MAFFT alignment wrapper (align-sequences)
  agent_allowed: true
  depends_on: []
  completed: '2025-11-18T17:00:00'
  notes: 'Created modules/02_alignment/align_sequences.py. Runs MAFFT, generates alignment
    stats (gaps, lengths), HTML report.'
- id: create-phylogeny-script
  phase: automation_scripts
  status: done
  summary: Create IQ-TREE phylogeny script with Bio.Phylo visualization
  agent_allowed: true
  depends_on:
  - create-alignment-script
  completed: '2025-11-18T17:00:00'
  notes: 'Created modules/03_phylogeny/build_tree.py. Runs IQ-TREE with auto model selection
    and 1000 ultrafast bootstrap. Generates tree.png with Bio.Phylo. Includes FigTree instructions.'
- id: create-alignment-viz
  phase: automation_scripts
  status: todo
  summary: Create alignment visualization with variation plots (show-variation)
  agent_allowed: true
  depends_on: []
  notes: 'Based on Hoque Fig 1 - large/small letters for conserved/variable positions.
    Interactive HTML output. Optional enhancement. See D009.'
- id: create-blast-script
  phase: automation_scripts
  status: done
  summary: Create auto-BLAST script for species identification (identify-species)
  agent_allowed: true
  depends_on: []
  completed: '2025-11-18T14:30:00'
  notes: 'Created modules/04_identification/identify_species.py. BLASTs sequences via BioPython,
    returns top 5 hits with % identity, generates HTML report.'
- id: create-master-pipeline
  phase: automation_scripts
  status: done
  summary: Create master pipeline script (analyze-sequences)
  agent_allowed: true
  depends_on:
  - create-qc-script
  - create-blast-script
  completed: '2025-11-18T14:30:00'
  notes: 'Created modules/master_pipeline.py. Runs QC → BLAST workflow. Simplified from
    original plan (no alignment viz for now).'
- id: create-html-dashboard
  phase: automation_scripts
  status: todo
  summary: Create HTML dashboard generator for results
  agent_allowed: true
  depends_on:
  - create-master-pipeline
  notes: 'Interactive dashboard with tabs: QC, Alignment, Tree, Species ID. Plotly/HTML.
    See D010.'
- id: setup-github-actions
  phase: container_setup
  status: done
  summary: Set up GitHub Actions workflow for automatic container builds
  agent_allowed: true
  depends_on:
  - create-minimal-dockerfile
  completed: '2025-11-18T14:45:00'
  notes: 'Created .github/workflows/docker-build.yml. Adapted from RNA-seq workflow. Pushes
    to ghcr.io and Docker Hub. Triggered on push to main.'
- id: fix-dockerfile-libraries
  phase: container_setup
  status: done
  summary: Fix Docker build by adding missing system libraries from RNA-seq container
  agent_allowed: true
  depends_on:
  - setup-github-actions
  completed: '2025-11-19T10:00:00'
  notes: 'Added libcurl4-openssl-dev, libssl-dev, libxml2-dev, font libs, image libs, compression
    libs. Container now builds successfully in 1m16s.'
- id: reorganize-repository-structure
  phase: repository_reorganization
  status: in_progress
  summary: Simplify and consolidate directory structure for student usability
  agent_allowed: true
  depends_on:
  - fix-dockerfile-libraries
  notes: 'Consolidate data dirs, move tutorials, remove redundant numbered directories (04-08_),
    remove duplicates (modules/, scripts/). Make structure linear for beginners.'
- id: rename-caps-files
  phase: repository_reorganization
  status: done
  summary: Fix ALL CAPS filenames (only README.md should be caps)
  agent_allowed: true
  depends_on: []
  completed: '2025-11-19T10:50:00'
  notes: 'Renamed ASSIGNMENT.md → assignment.md, STATUS.md → status.md per assistant_rules.md'
- id: consolidate-data-directories
  phase: repository_reorganization
  status: done
  summary: Consolidate multiple data directories into single data/ structure
  agent_allowed: true
  depends_on: []
  completed: '2025-11-19T11:00:00'
  notes: 'Renamed data/reference → data/reference_sequences, created data/student_sequences,
    removed empty 04_data/ directory. Single clear data/ structure.'
- id: wait-for-container-build
  phase: testing_and_validation
  status: done
  summary: Wait for GitHub Actions to complete container build (commit 983717e)
  agent_allowed: false
  depends_on:
  - reorganize-repository-structure
  completed: '2025-11-19T12:23:00'
  notes: 'Container built successfully. Available at ghcr.io/cosmelab/dna-barcoding-analysis:latest'
- id: test-qc-with-real-data
  phase: testing_and_validation
  status: todo
  summary: Test QC module with data/test_data (8 .ab1 files)
  agent_allowed: true
  depends_on:
  - wait-for-container-build
  notes: 'Run qc-sequences on test_data. Verify F/R grouping works. Check HTML report quality.'
- id: test-alignment-module
  phase: testing_and_validation
  status: todo
  summary: Test alignment module with QC-passed sequences
  agent_allowed: true
  depends_on:
  - test-qc-with-real-data
  notes: 'Run align-sequences. Verify visual alignment viewer works. Check conserved/variable positions.'
- id: test-phylogeny-module
  phase: testing_and_validation
  status: todo
  summary: Test phylogeny module - build tree with student + reference sequences
  agent_allowed: true
  depends_on:
  - test-alignment-module
  notes: 'Run build-tree. Generate phylogenetic tree. Verify ggtree visualization.'
- id: test-blast-module
  phase: testing_and_validation
  status: todo
  summary: Test BLAST identification module
  agent_allowed: true
  depends_on:
  - test-qc-with-real-data
  notes: 'Run blast-identify. Verify species ID works. Check HTML report.'
- id: test-full-pipeline
  phase: testing_and_validation
  status: todo
  summary: Run complete analyze-sequences pipeline end-to-end
  agent_allowed: true
  depends_on:
  - test-qc-with-real-data
  - test-alignment-module
  - test-phylogeny-module
  - test-blast-module
  notes: 'Run full automated pipeline. Verify all outputs generated correctly.'
- id: review-all-modules
  phase: testing_and_validation
  status: todo
  summary: Review all created modules and scripts for correctness
  agent_allowed: true
  depends_on:
  - test-full-pipeline
  notes: 'Check code quality, error handling, student-friendly messages, documentation.'
- id: determine-linear-workflow
  phase: documentation
  status: todo
  summary: Determine best linear, easy-to-follow workflow for students
  agent_allowed: true
  depends_on:
  - review-all-modules
  notes: 'Simplify student instructions. Ensure workflow is foolproof for beginners.'
- id: create-website-pages
  phase: documentation
  status: todo
  summary: Create comprehensive website with HTML pages for all tutorials
  agent_allowed: true
  depends_on:
  - determine-linear-workflow
  notes: 'Use ENTM201L website style (setup/index.html naming). Convert all markdown to HTML. Create navigation.'
- id: create-classroom-template
  phase: github_classroom
  status: todo
  summary: Create GitHub Classroom assignment template structure
  agent_allowed: true
  depends_on:
  - create-website-pages
  notes: 'Single assignment for Week 8. Configure autograding. Test student workflow.'
- id: test-with-chromatograms
  phase: testing
  status: done
  summary: Test complete pipeline with real chromatogram data
  agent_allowed: true
  depends_on:
  - create-qc-script
  - create-assembly-script
  completed: '2025-11-18T18:00:00'
  notes: 'Tested with 8 UC genomics core samples (Nov 13, 2025). Results: 4 passed (AT99, AT_ROCK),
    4 failed (AT83, AT94). Successfully merged AT_ROCK F+R. Chromatogram visualization working.'
- id: create-module-readmes
  phase: documentation
  status: todo
  summary: Create README files for each module (00-04)
  agent_allowed: true
  depends_on:
  - create-assembly-script
  - create-qc-script
  - create-alignment-script
  - create-phylogeny-script
  - create-blast-script
  notes: 'Write student-friendly README for each module explaining usage, inputs, outputs,
    examples. Include troubleshooting tips.'
- id: update-master-pipeline
  phase: automation_scripts
  status: todo
  summary: Update master pipeline to include all modules
  agent_allowed: true
  depends_on:
  - create-assembly-script
  - create-alignment-script
  - create-phylogeny-script
  notes: 'Update master_pipeline.py to run: Assembly → QC → Alignment → Phylogeny → BLAST.
    Add command-line flags to skip optional steps.'
- id: investigate-missing-tree-sample
  phase: bug_investigation
  status: todo
  summary: Investigate if one of 4 consensus samples is missing from phylogenetic tree visualization
  agent_allowed: true
  depends_on: []
  notes: 'User reported tree seems to be missing one sample. All 4 are in tree.treefile (AT-HV1, AT-HV3, AT-JM2, AT-WL2) but may not be visible in PNG. Check tree.png visualization.'
- id: rename-results-directories
  phase: repository_reorganization  
  status: todo
  summary: Rename results directories with linear numbering (01_qc, 02_consensus, 03_alignment, etc)
  agent_allowed: true
  depends_on: []
  notes: 'Current: results/qc/, results/consensus/, results/alignment/, results/phylogeny/, results/blast/. Want: results/01_qc/, results/02_consensus/, results/03_alignment/, results/04_phylogeny/, results/05_blast/ for clarity'
- id: create-scripts-directory
  phase: repository_reorganization
  status: todo
  summary: Create scripts/ directory and organize helper scripts
  agent_allowed: true
  depends_on: []
  notes: 'Move tutorial.sh and other scripts to scripts/ directory. Keep modules/ for analysis modules only.'
- id: fix-tutorial-confusion
  phase: repository_reorganization
  status: todo
  summary: Fix confusion between /tutorials/ directory and tutorial.sh script
  agent_allowed: true
  depends_on: []
  notes: 'Currently have both /tutorials/ directory AND tutorial.sh in root. Very confusing! Decide on one approach and consolidate.'
- id: create-getting-started-guide
  phase: documentation
  status: todo
  summary: Create ASCII visual protocol for getting started (git clone → docker → tutorial)
  agent_allowed: true
  depends_on:
  - fix-tutorial-confusion
  notes: 'Students need clear step-by-step: 1) git clone, 2) docker login + pull container, 3) run tutorial with test_data, 4) run analysis on their data. Make it impossible to mess up.'
- id: verify-docker-workflow
  phase: documentation
  status: todo
  summary: Document and verify docker workflow (running, logged in, pull container)
  agent_allowed: true
  depends_on: []
  notes: 'Students must: 1) Have Docker Desktop running, 2) Be logged in via CLI (docker login), 3) Pull cosmelab/dna-barcoding-analysis:latest. Document this clearly.'
